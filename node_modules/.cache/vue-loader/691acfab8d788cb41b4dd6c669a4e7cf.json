{"remainingRequest":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js??vue-loader-options!/home/heschwerdt/currentWork/vue-graph-visual/src/nodes/GraphNode.vue?vue&type=script&lang=js&","dependencies":[{"path":"/home/heschwerdt/currentWork/vue-graph-visual/src/nodes/GraphNode.vue","mtime":1612438795808},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/usr/local/lib/node_modules/@vue/cli-service-global/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICAgIHByb3BzOiB7CiAgICAgICAgeDogewogICAgICAgICAgICB0eXBlOiBOdW1iZXIsCiAgICAgICAgICAgIGRlZmF1bHQ6IDAKICAgICAgICB9LAogICAgICAgIHk6IHsKICAgICAgICAgICAgdHlwZTogTnVtYmVyLAogICAgICAgICAgICBkZWZhdWx0OiAwCiAgICAgICAgfSwKICAgICAgICBzY2FsZTogewogICAgICAgICAgICB0eXBlOiBOdW1iZXIsCiAgICAgICAgICAgIGRlZmF1bHQ6IDEKICAgICAgICB9LAogICAgICAgIHdpZHRoOiB7CiAgICAgICAgICAgIHR5cGU6IE51bWJlciwKICAgICAgICAgICAgZGVmYXVsdDogNTAKICAgICAgICB9LAogICAgICAgIGhlaWdodDogewogICAgICAgICAgICB0eXBlOiBOdW1iZXIsCiAgICAgICAgICAgIGRlZmF1bHQ6IDUwCiAgICAgICAgfSwKICAgICAgICBjb2xvcjogewogICAgICAgICAgICB0eXBlOiBTdHJpbmcsCiAgICAgICAgICAgIGRlZmF1bHQ6ICcjYWNjYWZmJwogICAgICAgIH0sCiAgICAgICAgYm9yZGVyUmFkaXVzOiB7CiAgICAgICAgICAgIHR5cGU6IE51bWJlciwKICAgICAgICAgICAgZGVmYXVsdDogMAogICAgICAgIH0sCiAgICAgICAgbGFiZWw6IHsKICAgICAgICAgICAgdHlwZTogU3RyaW5nLAogICAgICAgICAgICBkZWZhdWx0OiAnJwogICAgICAgIH0sCiAgICAgICAgc3ZnOiB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICAgICAgfSwKICAgIH0sCiAgICBkYXRhOiBmdW5jdGlvbigpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICBpc0JlaW5nRHJhZ2dlZDogZmFsc2UsCiAgICAgICAgICAgIG9mZnNldDogdW5kZWZpbmVkLAogICAgICAgICAgICB0cmFuc2Zvcm06IHVuZGVmaW5lZCwKICAgICAgICB9CiAgICB9LAogICAgbWV0aG9kczogewogICAgICAgIGhhbmRsZURvd24oZXZ0KSB7CiAgICAgICAgICAgIGlmKGV2dCAmJiAoZXZ0LndoaWNoID09IDIgfHwgZXZ0LmJ1dHRvbiA9PSA0ICkpewogICAgICAgICAgICAgICAgdGhpcy4kcmVmc1snbm9kZSddLnN0eWxlLmN1cnNvciA9ICdtb3ZlJwogICAgICAgICAgICAgICAgdGhpcy5pc0JlaW5nRHJhZ2dlZCA9IHRydWU7CgogICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQgPSB0aGlzLmdldE1vdXNlUG9zaXRpb24oZXZ0KTsKICAgICAgICAgICAgICAgIHZhciB0cmFuc2Zvcm1zID0gdGhpcy4kcmVmc1snbm9kZSddLnRyYW5zZm9ybS5iYXNlVmFsOwogICAgICAgICAgICAgICAgaWYgKHRyYW5zZm9ybXMubGVuZ3RoID09PSAwIHx8CiAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3Jtcy5nZXRJdGVtKDApLnR5cGUgIT09IFNWR1RyYW5zZm9ybS5TVkdfVFJBTlNGT1JNX1RSQU5TTEFURSkgewogICAgICAgICAgICAgICAgICAgIHZhciB0cmFuc2xhdGUgPSB0aGlzLnN2Zy5jcmVhdGVTVkdUcmFuc2Zvcm0oKQogICAgICAgICAgICAgICAgICAgIHRyYW5zbGF0ZS5zZXRUcmFuc2xhdGUoMCwgMCk7CiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIHRoZSB0cmFuc2xhdGlvbiB0byB0aGUgZnJvbnQgb2YgdGhlIHRyYW5zZm9ybXMgbGlzdAogICAgICAgICAgICAgICAgICAgIHRoaXMuJHJlZnNbJ25vZGUnXS50cmFuc2Zvcm0uYmFzZVZhbC5pbnNlcnRJdGVtQmVmb3JlKHRyYW5zbGF0ZSwgMCk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAKCiAgICAgICAgICAgICAgICB0aGlzLnRyYW5zZm9ybSA9IHRyYW5zZm9ybXMuZ2V0SXRlbSgwKQogICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQueCAtPSB0aGlzLnRyYW5zZm9ybS5tYXRyaXguZQogICAgICAgICAgICAgICAgdGhpcy5vZmZzZXQueSAtPSB0aGlzLnRyYW5zZm9ybS5tYXRyaXguZgogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgZXZ0CiAgICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIGhhbmRsZU1vdmUoZXZ0KSB7CiAgICAgICAgICAgIGlmKHRoaXMuaXNCZWluZ0RyYWdnZWQpewogICAgICAgICAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCkKICAgICAgICAgICAgICAgIHZhciBjb29yZCA9IHRoaXMuZ2V0TW91c2VQb3NpdGlvbihldnQpOwogICAgICAgICAgICAgICAgdGhpcy50cmFuc2Zvcm0uc2V0VHJhbnNsYXRlKGNvb3JkLngtdGhpcy5vZmZzZXQueCxjb29yZC55IC0gdGhpcy5vZmZzZXQueSkKICAgICAgICAgICAgfQogICAgICAgIH0sCiAgICAgICAgaGFuZGxlUmVsZWFzZSgpIHsKICAgICAgICAgICAgdGhpcy5pc0JlaW5nRHJhZ2dlZCA9IGZhbHNlCiAgICAgICAgICAgIHRoaXMuJHJlZnNbJ25vZGUnXS5zdHlsZS5jdXJzb3IgPSAnZGVmYXVsdCcKICAgICAgICB9LAogICAgICAgIGdldE1vdXNlUG9zaXRpb24oZXZ0KSB7CiAgICAgICAgICAgIHZhciBDVE0gPSB0aGlzLnN2Zy5nZXRTY3JlZW5DVE0oKQogICAgICAgICAgICBpZihldnQudG91Y2hlcykge2V2dCA9IGV2dC50b3VjaGVzWzBdfQogICAgICAgICAgICByZXR1cm4gewogICAgICAgICAgICAgICAgeDogKGV2dC5jbGllbnRYIC0gQ1RNLmUpIC8gQ1RNLmEsCiAgICAgICAgICAgICAgICB5OiAoZXZ0LmNsaWVudFkgLSBDVE0uZikgLyBDVE0uZAogICAgICAgICAgICB9CiAgICAgICAgfQogICAgfQp9Cg=="},{"version":3,"sources":["GraphNode.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;AAoBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"GraphNode.vue","sourceRoot":"src/nodes","sourcesContent":["<template>\n    <g class=\"graph-comp\" :transform=\"'matrix('+scale+',0,0,'+scale+','+x+','+y+')'\" :width=\"width\" :height=\"height\" :draggable=\"true\">\n        <rect \n            :width=\"width\" \n            :height=\"height\" \n            :fill=\"color\" \n            :rx=\"borderRadius\" \n            :ry=\"borderRadius\" \n            @mousedown=\"handleDown\"\n            @mousemove=\"handleMove\" \n            @mouseup=\"handleRelease\" \n            @mouseleave=\"handleRelease\"\n            class=\"node\"\n            >\n                <text :transform=\"'matrix('+scale+',0,0,'+scale+','+x+','+y+')'\" :width=\"width\" :height=\"height\">{{ label }}</text>\n            </rect>\n    </g>\n</template>\n\n<script>\nexport default {\n    props: {\n        x: {\n            type: Number,\n            default: 0\n        },\n        y: {\n            type: Number,\n            default: 0\n        },\n        scale: {\n            type: Number,\n            default: 1\n        },\n        width: {\n            type: Number,\n            default: 50\n        },\n        height: {\n            type: Number,\n            default: 50\n        },\n        color: {\n            type: String,\n            default: '#accaff'\n        },\n        borderRadius: {\n            type: Number,\n            default: 0\n        },\n        label: {\n            type: String,\n            default: ''\n        },\n        svg: {\n            required: true\n        },\n    },\n    data: function() {\n        return {\n            isBeingDragged: false,\n            offset: undefined,\n            transform: undefined,\n        }\n    },\n    methods: {\n        handleDown(evt) {\n            if(evt && (evt.which == 2 || evt.button == 4 )){\n                this.$refs['node'].style.cursor = 'move'\n                this.isBeingDragged = true;\n\n                this.offset = this.getMousePosition(evt);\n                var transforms = this.$refs['node'].transform.baseVal;\n                if (transforms.length === 0 ||\n                    transforms.getItem(0).type !== SVGTransform.SVG_TRANSFORM_TRANSLATE) {\n                    var translate = this.svg.createSVGTransform()\n                    translate.setTranslate(0, 0);\n                    // Add the translation to the front of the transforms list\n                    this.$refs['node'].transform.baseVal.insertItemBefore(translate, 0);\n                }\n                \n\n                this.transform = transforms.getItem(0)\n                this.offset.x -= this.transform.matrix.e\n                this.offset.y -= this.transform.matrix.f\n            } else {\n                evt\n            }\n        },\n        handleMove(evt) {\n            if(this.isBeingDragged){\n                evt.preventDefault()\n                var coord = this.getMousePosition(evt);\n                this.transform.setTranslate(coord.x-this.offset.x,coord.y - this.offset.y)\n            }\n        },\n        handleRelease() {\n            this.isBeingDragged = false\n            this.$refs['node'].style.cursor = 'default'\n        },\n        getMousePosition(evt) {\n            var CTM = this.svg.getScreenCTM()\n            if(evt.touches) {evt = evt.touches[0]}\n            return {\n                x: (evt.clientX - CTM.e) / CTM.a,\n                y: (evt.clientY - CTM.f) / CTM.d\n            }\n        }\n    }\n}\n</script>\n\n<style scoped>\n.node {\n    opacity: 1;\n    -webkit-filter: drop-shadow( 5px 5px 4px rgba(0, 0, 0, .7));\n    filter: drop-shadow( 5px 5px 4px rgba(0, 0, 0, .7));\n}\n\n.node:hover {\n    -webkit-filter: drop-shadow( 7px 7px 5px rgba(0, 0, 0, .7));\n    filter: drop-shadow( 7px 7px 5px rgba(0, 0, 0, .7));\n    opacity: 0.7;\n    stroke: orange;\n    stroke-width: 2;\n    \n}\n</style>\n"]}]}